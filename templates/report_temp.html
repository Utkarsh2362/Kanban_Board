<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <style>
        .main{
            text-align: center;
            color: rgb(255,48,71);
        }
        .newpage{
            page-break-after: always;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            height: 100px;
        }
    </style>

</head>
<body>
    <h1 class="main">
    <u>
        MONTHLY REPORT  
    </u>
    </h1><br><br>
    <p style="text-align: left">DATE: {{today}}</p>
    <br><br>
    <P>Hey {{ username }}, this is your monthly report for the month of {{ month }}.</P>
    <P>It contains all your lists and tasks detailed summary, have a look.</P>
    <br>
    <div class="newpage"></div><br>
    <h1 style="color: rgb(255,48,71);"><u>YOUR LISTS</u></h1><br><br>

   <body>
    {%if lists | length>0 %}    
      <table class="table table-striped">
        <thead>
            <tr>
                <th>Id</th>
                <th>Lists</th>
            </tr>
        </thead>

        <tbody>
            {% for key, value in lists.items() %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value }}</td>
            </tr>
            {% endfor %}
        </tbody>

      </table>
      {% else %}
      <h5><em>YOU DO NOT HAVE ANY LISTS AVAILABLE.</em></h5>
      {% endif %}

      <div class="newpage"></div>
      {%if lists | length>0 %}
      {% for key, value in lists.items() %}
      <div class="newpage"></div>
      <h1 style="color: rgb(60,60,60);">Your cards description for the list: {{ value }}</h1><br><br>
      <table class="table table-striped">
        <thead>
            <tr>
                <th>Id</th>
                <th>Card Title</th>
                <th>Content</th>
                <th>Creation Date</th>
                <th>Completion Date</th>
                <th>Deadline</th>
            </tr>
        </thead>
        <tbody>
            {% for cards in cards_list %}
            {% if cards.list_id==key %}
            <tr>
                <td>{{ cards.id }}</td>
                <td>{{ cards.card_title }}</td>
                <td>{{ cards.content }}</td>
                <td>{{ cards.created_at }}</td>
                <td>{{ cards.completed_at }}</td>
                <td>{{ cards.deadline }}</td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
      </table>  
      {% endfor %}
      {% endif %}
   </body>
    

</body>
</html>